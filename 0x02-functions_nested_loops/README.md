code about functions and nested loops